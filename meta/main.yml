---
galaxy_info:
  author: Eliah Rebstock
  description: Setup JMX credentials and add DataDog java agent
  company: PeopleDoc
  license: BSD
  min_ansible_version: 2.3
  platforms:
    - name: Debian
      versions:
        - all

  categories:
    - system

dependencies:
  - role: Datadog.datadog
    tags: datadog_agent
    vars:
      jmx_check_config:
        jmx:
          init_config:
          instances:
            - host: localhost
              port: "{{ jmx_port }}"
              user: "{{ user }}"
              password: "{{ password }}"
              name: "{{ app_instance_name }}"
      datadog_checks: "{{ jmx_check_config|combine(other_datadog_checks) }}"
